import{r as o,t as m,j as e}from"./index-gVXWcna_.js";import{u,S as j,D as v,L as x,H as w,f as N,a as M}from"./SideBarWrapper-zuvVVbwi.js";import{u as F,B as i}from"./useLogin-BtHzT5Xv.js";const q=function(){const[r,c]=o.useState(null),[f,d]=o.useState(!0),s=F(n=>n.favorites);o.useEffect(()=>{r&&!s.includes(r)&&(c(null),d(!0))},[s,r]);const{data:t,isLoading:p,error:l,refetch:g}=u({queryKey:["fetchMatch",s],queryFn:()=>N(s),enabled:s.length>0&&f,staleTime:1/0});o.useEffect(()=>{t!=null&&t.match&&!r&&(c(t.match),d(!1))},[t,r]);const{data:a,isLoading:b,error:h}=u({queryKey:["fetchDogs",t==null?void 0:t.match],queryFn:()=>{const n=r||(t==null?void 0:t.match);return n?M([n]):Promise.resolve([])},enabled:!!(r||t!=null&&t.match),staleTime:1/0}),y=()=>{d(!0),c(null),g()};return o.useEffect(()=>{h&&m.error("Failed to load dogs",{description:"Please try again or check your connection"}),l&&m.error("Failed to load match data",{description:"Please try again"})},[h,l]),e.jsx(j,{children:e.jsx("div",{className:"flex justify-center items-center h-full w-full",children:b||p?e.jsx("div",{className:"text-center p-8",children:"Loading your perfect match..."}):a&&a.length>0?e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Your Perfect Match!"}),e.jsx("p",{className:"text-muted-foreground",children:"We found the perfect dog for you"})]}),e.jsx(v,{dog:a[0]},a[0].id),e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx(i,{className:"rounded-md py-2 px-4 border border-transparent text-sm text-white shadow-md hover:shadow-lg bg-amber-500 hover:bg-amber-600 cursor-pointer",type:"button",onClick:y,children:"New Match"}),e.jsx(x,{to:"/",children:e.jsx(i,{className:"rounded-md py-2 px-4 border border-transparent text-sm text-white shadow-md hover:shadow-lg bg-chart-5 hover:bg-cyan-700 cursor-pointer",type:"button",children:"Find More Dogs"})})]})]}):e.jsxs("div",{className:"max-w-md w-full bg-card shadow-sm border border-slate-200 rounded-xl overflow-hidden transition duration-300 hover:shadow-md p-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary",children:"No Match Found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"You need to have favorites to find a match"})]}),e.jsxs("div",{className:"p-4 flex flex-col items-center",children:[e.jsx("p",{className:"text-card-foreground text-lg mb-4 text-center",children:"Select some favorite dogs to get matched with your perfect companion!"}),e.jsx(x,{to:"/",children:e.jsxs(i,{className:"rounded-md w-full py-2 px-4 border border-transparent text-center text-sm transition-all shadow-md hover:shadow-lg active:shadow-none cursor-pointer bg-chart-5 text-white hover:bg-cyan-700 active:bg-cyan-700",type:"button",children:[e.jsx(w,{className:"mr-2"}),"Select Favorites"]})})]})]})})})};export{q as component};
